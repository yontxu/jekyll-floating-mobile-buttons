$levels: 1
$md-width: 568px
$c-black: #333

=active-level-x
  @for $i from 1 through $levels
    .csstransitions.csstransforms #mobile-nav .active-level-#{$i}
      transform: translateX(#{-$i*100%})
      -ms-transform: translateX(#{-$i*100%})
      -moz-transform: translateX(#{-$i*100%})
      -o-transform: translateX(#{-$i*100%})
      -webkit-transform: translateX(#{-$i*100%})
      transform: translateX(#{-$i*100%})
      left: 0
    #mobile-nav .active-level-#{$i}
      left: #{-$i*100%}

@media (max-width: $md-width)
  @include active-level-x
  #main-wrapper
    overflow: hidden
  #s-mask
    transition: transform 500ms ease
    position: relative
  #mobile-nav
    width: 90%
    z-index: -1
    background: #fff
    position: absolute
    overflow: hidden
    transform: translate3d(-100%, 0, 0)
    #nav-back-link
      padding: 5px  15px
      text-align: right
      background-color: #bfc1c3
      a
        color: $c-black
        text-transform: uppercase
        font-size: 90%
        line-height: 0.9
        &:after
          content: '\00BB'
          font-size: 22px
          margin-left: 5px
          vertical-align: top
    ul
      padding: 0
      margin: 0
      clear: both
      position: relative
      transition: transform .3s linear
    li
      background-image: none
      border-top: solid 1px #bfc1c3
      margin: 0
      width: auto
      list-style: none
      &:hover
        background-color: #D4D4D4
      a
        display: block
        padding: 15px 0 15px 15px
        color: $c-black
        text-decoration: none

    > ul ul
      position: absolute
      left: 100%
      width: 100%
      display: none
      top: 0
    > ul ul.active
      display: block
  #holder
    box-shadow: -1px 0 10px -2px rgba(0, 0, 0, .36)
    overflow: auto
    header
      #mobile-nav-open
        display: inline-block
        text-indent: 0
        color: $c-black
        text-decoration: none
        text-transform: uppercase
        font-size: 60%
        vertical-align: bottom
        height: 32px
        &:before
          content: ''
          display: block
          border-top: 10px double $c-black
          border-bottom: 3px solid $c-black
          width: 28px
          height: 4px
          box-sizing: content-box
          margin-bottom: 5px
  body.nav-open #s-mask
    left: 90%
  .csstransitions.csstransforms body.nav-open #s-mask
    -ms-transform: translateX(90%)
    -moz-transform: translateX(90%)
    -o-transform: translateX(90%)
    -webkit-transform: translateX(90%)
    transform: translateX(90%)
    left: 0